
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>MinnPost</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link type="text/css" rel="stylesheet" media="all" href="http://www.minnpost.com/sites/default/files/css/css_bb801627df93671ec2cf2a1c9ecf4ad2.css" />
  <link type="text/css" rel="stylesheet" media="screen" href="http://www.minnpost.com/sites/default/files/css/css_b833827e9fdb99e83e393d38c32a71fd.css" />
  <link type="text/css" rel="stylesheet" media="print" href="http://www.minnpost.com/sites/default/files/css/css_dd48b5b093a35515052acfc42613d628.css" />
  <!--[if IE]>
      <link rel="stylesheet" href="http://www.minnpost.com/sites/default/themes/derma/inc/css/ie.css?j" type="text/css">
  <![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
</head>
<body class="front logged-in page-home one-sidebar sidebar-right admin-nw admin-vertical admin-df  one-sidebar sidebar-right">

  <!-- Embed Start -->
  <div class="node-body fieldlayout node-field-body">
    <style type="text/css">
    	@import url('https://s3.amazonaws.com/data.minnpost/js/VeriteCo-Timeline-master-20120404/timeline.css');
    </style>
    <style type="text/css">
    </style>
  
  
    <div id="timeline"></div>
  
  
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.1.min.js"></script>
    <!-- <script type="text/javascript" src="https://s3.amazonaws.com/data.minnpost/js/VeriteCo-Timeline-master-20120404/timeline-min.js"></script> -->
    <script type="text/javascript" src="js/timeline.js"></script>
    <script type="text/javascript">
      // Namespace jQuery
      (function($) {
        var stations = [];
      
        $(document).ready(function() {
          // Get station data
          $.getJSON('data/noaa-mi3-station-data-mn-trimmed.json', function(data) {
            stations = data;
            
            // Get live record temperature data
            $.getJSON("https://api.scraperwiki.com/api/1.0/datastore/sqlite?format=jsondict&name=broken_temperature_record_from_pbs&query=select%20*%20from%20%60swdata%60%20where%20state%20%3D%20%22MN%22&callback=?", function(data) {
              
              // Define basic timeline
              var timelineData = {};
              timelineData.timeline = {};
              timelineData.timeline.headline = 'Testing';
              timelineData.timeline.type = 'default';
              timelineData.timeline.startDate = '2012,01,01';
              timelineData.timeline.text = 'still just testing';
              timelineData.timeline.asset = {
                media: 'http://2.bp.blogspot.com/-dxJbW0CG8Zs/TmkoMA5-cPI/AAAAAAAAAqw/fQpsz9GpFdo/s1600/voyage-dans-la-lune-1902-02-g.jpg',
                credit: '',
                caption: ''
              };
              timelineData.timeline.date = [];
              
              // Add records
              /*
              county: "OLMSTED"
id: "2012-01-09--ROCHESTER-INTL-AP"
previous_record: "46.0"
previous_record_date: "2002-01-09"
record: "46.0"
record_date: "2012-01-09"
state: "MN"
station_name: "ROCHESTER INTL AP"
timestamp: 1333570227 
*/
              for (var i in data) {
                if (data[i].record_date) {
                  var tempDate = data[i].record_date.split('-');
                  timelineData.timeline.date.push({
                    startDate: tempDate[0] + ',' + tempDate[1] + ',' + tempDate[2],
                    headline: 'Record broken on ' + data[i].record_date,
                    text: data[i].station_name
                  });
                }
              }
              
              // Make timeline
              console.log(timelineData);
              var timeline = new VMM.Timeline();
				      timeline.init(timelineData);
            });
          });
        });
      })(jQuery);
    </script>
  </div>
  <!-- Embed End -->

</body>
</html>